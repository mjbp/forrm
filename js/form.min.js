(function(e,t,r){"use strict";"function"==typeof define&&define.amd?define(r):t[e]=r()})("Form",this,function(e,t){"use strict";function r(e,t){var s;for(s in t)t.hasOwnProperty(s)&&(t[s]&&t[s].constructor&&t[s].constructor===Object?(e[s]=e[s]||{},r(e[s],t[s])):e[s]=t[s]);return e}function s(e,t){this.DOMElement=e,this.parent=t,this.init()}function n(e,t){this.element=e,this.options=r(i,t),this.init()}e=e||"Form",t=t||this;var i={displayMessages:!0,listMessages:!0,listTitle:"Errors were found in the form:",errorMessagesClass:"form-error-message",errorMessageElement:"p",errorMessages:{required:"Fields marked * are required",tel:"Enter a valid phone number",dob:"Enter a valid date of birth",email:"Enter a valid email address"},patterns:{email:"[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",tel:"[\\w\\d\\s\\(\\)\\.+-]+"},fail:function(){},pass:!1};return s.prototype={init:function(){var e="placeholder"in document.createElement("input");e||this.placeHolder()},placeHolder:function(){var e=function(e){e.stopPropagation(),this.value="",this.className=this.className.split("form-placeholder").join("")},t=function(e){e.stopPropagation(),this.value=this.getAttribute("placeholder"),this.className+=" form-placeholder"};this.DOMElement.getAttribute("placeholder")&&(this.DOMElement.value=""+this.DOMElement.getAttribute("placeholder"),this.DOMElement.className+=" form-placeholder",this.DOMElement.addEventListener("focus",e,!1),this.DOMElement.addEventListener("blur",t,!1))},validate:function(){return this.DOMElement.validity}},n.prototype={init:function(){var e,t;for(this.fields=this.element.querySelectorAll("input, textarea"),this.elements=[],t=this.fields.length,this.element.querySelector("input[type=submit]").addEventListener("click",this,!1),e=0;t>e;e+=1)this.elements[e]=new s(this.fields[e],this)},handleEvent:function(e){"click"===e.type&&(e.preventDefault(),this.clearErrors().test())},write:function(e){var t=this,r=document.createElement(t.options.errorMessageElement);return r.textContent=e,r.className=t.options.errorMessagesClass,r.setAttribute("role","alert"),r},clearErrors:function(){var e,t,r=this,s=r.fields.length;for(t=0;s>t;t+=1)r.fields[t].parentNode.className.indexOf("form-error")>-1&&(r.fields[t].parentNode.className=r.fields[t].parentNode.className.split("form-error").join(""),r.options.listMessages||(e=r.fields[t].nextElementSibling,e&&e.parentNode.removeChild(e)));return r},listErrorMessages:function(){var e,t,r=this,s=document.querySelector(".form-error-list"),n=document.createElement("dl"),i=document.createElement("dt"),o=document.createElement("dd"),l=document.createElement("ul"),a=r.errors.length,d={};for(s&&s.parentElement.removeChild(s),i.innerHTML=r.options.listTitle,n.appendChild(i),n.appendChild(o),n.className="form-error-list",n.setAttribute("role","alert"),o.appendChild(l),e=0;a>e;e+=1)d[r.errors[e][1]]=r.options.errorMessages[r.errors[e][1]];for(e in d)d.hasOwnProperty(e)&&(t=document.createElement("li"),t.innerHTML=d[e],l.appendChild(t));r.element.insertBefore(n,r.element.firstChild),window.scrollTo(0,n.offsetTop),n.focus()},displayErrorMessages:function(){var e,t,r,s,n=this,i=n.errors.length;for(e=0;i>e;e+=1)s=n.write(n.options.errorMessages[n.errors[e][1]]),t=null!==document.getElementById(n.errors[e][0])?document.getElementById(n.errors[e][0]):document.getElementsByName(n.errors[e][0])[0],r=t.parentNode,0===r.getElementsByClassName(n.options.errorMessagesClass).length&&r.insertBefore(s,t.nextSibling);window.scrollTo(0,document.getElementsByClassName(n.options.errorMessagesClass)[0].offsetTop),document.getElementsByClassName(n.options.errorMessagesClass)[0].focus()},addError:function(e,t,r){var s,n,i=this,o=e;s=r?o.getAttribute("name"):o.getAttribute("id"),n=r?o.parentNode:o,n.className+=" form-error",o.setAttribute("aria-invalid","true"),i.errors.push([s,t])},test:function(){var e,t,r=this.elements.length;for(e=0;r>e;e+=1)t=this.elements[e].DOMElement,"submit"!==t.getAttribute("type")&&null!==t.getAttribute("required")&&"hidden"!==t.getAttribute("type")&&null===t.getAttribute("novalidate")&&console.log(this.elements[e].validate())}},{init:function(e,t){var r,s=document.querySelectorAll(e),i=[],o=s.length;for(r=0;o>r;r+=1)s[r].hasAttribute("novalidate")||(i[r]=new n(s[r],t))}}});