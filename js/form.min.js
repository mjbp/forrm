(function(e,t,r){"use strict";"function"==typeof define&&define.amd?define(r):t[e]=r()})("Form",this,function(e,t){"use strict";function r(e,t){var s;for(s in t)t.hasOwnProperty(s)&&(t[s]&&t[s].constructor&&t[s].constructor===Object?(e[s]=e[s]||{},r(e[s],t[s])):e[s]=t[s]);return e}function s(e,t){this.element=e,this.options=r(n,t),this.init()}e=e||"Form",t=t||this;var n={displayMessages:!0,errorMessagesClass:"error-message",errorMessageElement:"p",errorMessages:{missing:"Fields marked * are required",phone:"Please enter a valid phone number",dob:"Please enter a valid date of birth",email:"Please enter a valid email address"},patterns:{email:"[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",tel:"[\\w\\d\\s\\(\\)\\.+-]+"},no:function(){},yes:!1};return s.prototype={init:function(){this.element.querySelector("input[type=submit]").addEventListener("click",this,!1)},handleEvent:function(e){"click"===e.type&&(e.preventDefault(),this.clearErrors().test())},write:function(e){var t=this,r=document.createElement(t.options.errorMessageElement);return r.textContent=e,r.className=t.options.errorMessagesClass,r},clearErrors:function(){var e,t,r=this.element.querySelectorAll("input, textarea"),s=r.length;for(t=0;s>t;t+=1)r[t].className=r[t].className.replace(/\serror/g,""),e=r[t].nextElementSibling,e&&e.parentNode.removeChild(e);return this},displayErrorMessages:function(){var e,t,r,s,n=this,i=n.errors.length;for(e=0;i>e;e+=1)s=n.write(n.options.errorMessages[n.errors[e][1]]),t=document.getElementById(n.errors[e][0]),r=t.parentNode,r.insertBefore(s,t.nextSibling)},test:function(){var e,t,r,s,n,i,o,a,l=this;for(this.errors=[],e=this.element.querySelectorAll("input, textarea"),o=e.length,i=0;o>i;i+=1)t=e[i],"hidden"!==t.getAttribute("type")&&null===t.getAttribute("novalidate")&&"submit"!==t.getAttribute("type")&&(null!==t.getAttribute("required")&&""===t.value?(t.className+=" error",l.errors.push([t.getAttribute("id"),"missing"])):null!==t.getAttribute("required")&&(r=t.getAttribute("type"),s=t.getAttribute("pattern")||l.options.patterns[r],n=RegExp(s,""),n.test(t.value)||(t.className+=" error",l.errors.push([t.getAttribute("id"),r]))));l.errors.length?(l.options.displayMessages&&l.displayErrorMessages(),this.options.no.call()):a=this.options.yes?this.options.yes.call():this.element.submit()}},{init:function(e,t){var r,n=document.querySelectorAll(e),i=[],o=n.length;for(r=0;o>r;r+=1)i[r]=new s(n[r],t)}}});