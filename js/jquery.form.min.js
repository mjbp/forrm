(function(e,t,r){"use strict";function s(t,r){this.element=t,this.options=e.extend(!0,{},o,r),this._defaults=o,this._name=i,this.init()}var i="Form",o={displayMessages:!0,listMessages:!1,listTitle:"Errors were found in the form:",errorMessagesClass:"form-error-message",errorMessageElement:"p",errorMessages:{required:"Fields marked * are required",tel:"Enter a valid phone number",dob:"Enter a valid date of birth",email:"Enter a valid email address"},patterns:{email:"[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",tel:"[\\w\\d\\s\\(\\)\\.+-]+"},fail:function(){},pass:!1};s.prototype={init:function(){var t=this;e(this.element).find("input[type=submit]").on("click",function(e){e.preventDefault(),t.clearErrors().clearPlaceholders().test()}),this.placeHolders()},clearPlaceholders:function(){return e(this.element).find(".form-placeholder").each(function(t,r){e(r)[0].value===e(r).attr("placeholder")&&(e(r)[0].value="")}),this},placeHolders:function(){var t="placeholder"in r.createElement("input"),s=e(this.element).find(":input:not(:hidden, :submit)"),i=(s.length,function(){e(this)[0].value=""}),o=function(){e(this)[0].value=e(this).attr("placeholder")};t||e.each(s,function(t,r){void 0!==e(r).attr("placeholder")&&(e(r)[0].value=e(r).attr("placeholder"),e(r).addClass("form-placeholder"),e([r]).on("focus",i).on("blur",o))})},write:function(t){var r=this;return e("<"+r.options.errorMessageElement+' role="alert"/>').addClass(r.options.errorMessagesClass).text(t)},clearErrors:function(){var t=this;return e(t.element).find(".form-error-list").length&&e(t.element).find(".form-error-list").remove(),e(t.element).find(".form-error").length&&(e(t.element).find(".form-error").removeClass("form-error"),e(t.element).find(".form-error-message").remove()),this},listErrorMessages:function(){var t,r=this,s=e('<dl class="form-error-list"><dt>'+r.options.listTitle+"</dt><dd><ul></ul></dd></dl>"),i=r.errors.length,o={};for(t=0;i>t;t+=1)o[r.errors[t][1]]=r.options.errorMessages[r.errors[t][1]];for(t in o)o.hasOwnProperty(t)&&e(s).find("ul").append("<li>"+o[t]+"</li>");e(r.element).prepend(s)},displayErrorMessages:function(){var t,r,s,i=this,o=i.errors.length;for(t=0;o>t;t+=1)s=i.write(i.options.errorMessages[i.errors[t][1]]),r=e("#"+i.errors[t][0]).length>0?e("#"+i.errors[t][0]):e("[name="+i.errors[t][0]+"]").first(),0===e(r).parent().find("."+i.options.errorMessagesClass).length&&e(r).after(s)},addError:function(t,r,s){var i,o,n=this,a=t;i=s?e(a).attr("name"):e(a).attr("id"),o=s?e(a).parent():e(a),e(o).addClass("form-error"),e(a).attr("aria-invalid","true"),n.errors.push([i,r])},test:function(){var t,s,i=this,o={};this.errors=[],e(this.element).find(":input").each(function(){var t,r,s,n=e(this);"hidden"!==n.attr("type")&&void 0===n.attr("novalidate")&&"submit"!==n.attr("type")&&void 0!==n.attr("required")&&(""===n.val()?i.addError(n,"required"):"radio"===n.attr("type")||"checkbox"===n.attr("type")?n.is(":checked")?o[n.attr("name")]="checked":"checked"!==o[n.attr("name")]&&(o[n.attr("name")]="not-checked"):(t=n.attr("type"),s=n.attr("pattern")||i.options.patterns[t],void 0!==s&&(r=RegExp(s,""),r.test(n.val()||i.addError(n,t))))}),e.each(o,function(t,o){"not-checked"===o&&(s=r.getElementsByName(t),e.each(s,function(e){i.addError(s[e],"required",!0)}))}),i.errors.length?(i.options.displayMessages&&(i.options.listMessages?i.listErrorMessages():i.displayErrorMessages()),this.placeHolders(),this.options.fail.call()):t=this.options.pass?this.options.pass.call():e(this.element).submit()}},e.fn[i]=function(t){return this.each(function(){e.data(this,"plugin_"+i)||e.data(this,"plugin_"+i,new s(this,t))})}})(jQuery,window,document,void 0);
