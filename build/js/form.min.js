(function(e,t,r){"use strict";"function"==typeof define&&define.amd?define(r):t[e]=r()})("Form",this,function(e,t){"use strict";function r(e,t){var s;for(s in t)t.hasOwnProperty(s)&&(t[s]&&t[s].constructor&&t[s].constructor===Object?(e[s]=e[s]||{},r(e[s],t[s])):e[s]=t[s]);return e}function s(e,t){this.element=e,this.options=r(i,t),this.init()}e=e||"Form",t=t||this;var i={displayMessages:!0,listMessages:!0,listTitle:"Errors were found in the form:",errorMessagesClass:"form-error-message",errorMessageElement:"p",errorMessages:{required:"Fields marked * are required",tel:"Enter a valid phone number",dob:"Enter a valid date of birth",email:"Enter a valid email address"},patterns:{email:"[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",tel:"[\\w\\d\\s\\(\\)\\.+-]+"},fail:function(){},pass:!1};return s.prototype={init:function(){this.fields=this.element.querySelectorAll("input, textarea"),this.element.querySelector("input[type=submit]").addEventListener("click",this,!1)},handleEvent:function(e){"click"===e.type&&(e.preventDefault(),this.clearErrors().test())},write:function(e){var t=this,r=document.createElement(t.options.errorMessageElement);return r.textContent=e,r.className=t.options.errorMessagesClass,r},clearErrors:function(){var e,t,r=this,s=r.fields.length;for(t=0;s>t;t+=1)r.fields[t].className=r.fields[t].className.replace(/\sform-error/g,""),e=r.fields[t].nextElementSibling,e&&e.parentNode.removeChild(e);return this},listErrorMessages:function(){var e,t,r=this,s=document.createElement("dl"),i=document.createElement("dt"),n=document.createElement("dd"),o=document.createElement("ul"),a=r.errors.length,l={};for(i.innerHTML=r.options.listTitle,s.appendChild(i),s.appendChild(n),s.className="form-error-list",n.appendChild(o),e=0;a>e;e+=1)l[r.errors[e][1]]=r.options.errorMessages[r.errors[e][1]];for(e in l)l.hasOwnProperty(e)&&(t=document.createElement("li"),t.innerHTML=l[e],o.appendChild(t));r.element.insertBefore(s,r.element.firstChild)},displayErrorMessages:function(){var e,t,r,s,i=this,n=i.errors.length;for(e=0;n>e;e+=1)s=i.write(i.options.errorMessages[i.errors[e][1]]),t=document.getElementById(i.errors[e][0]),r=t.parentNode,r.insertBefore(s,t.nextSibling)},test:function(){var e,t,r,s,i,n,o,a=this;for(this.errors=[],n=a.fields.length,i=0;n>i;i+=1)e=a.fields[i],"hidden"!==e.getAttribute("type")&&null===e.getAttribute("novalidate")&&"submit"!==e.getAttribute("type")&&null!==e.getAttribute("required")&&(""===e.value?(e.className+=" form-error",a.errors.push([e.getAttribute("id"),"required"])):(t=e.getAttribute("type"),r=e.getAttribute("pattern")||a.options.patterns[t],void 0!==r&&(s=RegExp(r,""),s.test(e.value)||(e.className+=" form-error",a.errors.push([e.getAttribute("id"),t])))));a.errors.length?(a.options.displayMessages&&(a.options.listMessages?a.listErrorMessages():a.displayErrorMessages()),this.options.fail.call()):o=this.options.pass?this.options.pass.call():this.element.submit()}},{init:function(e,t){var r,i=document.querySelectorAll(e),n=[],o=i.length;for(r=0;o>r;r+=1)i[r].hasAttribute("novalidate")||(n[r]=new s(i[r],t))}}});