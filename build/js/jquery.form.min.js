(function(e,t,i){"use strict";function s(e,t){this.DOMElement=e,this.parent=t,this.init()}function r(t,i){this.element=t,this.options=e.extend(!0,{},l,i),this._defaults=l,this._name=n,this.elements=[],this.init()}var n="Form",l={augmentHTML5:!0,customErrorMessage:!1,displayMessages:!0,listMessages:!0,listTitle:"We couldn't submit the form, please check your answers:",errorMessagesClass:"form-error-message",errorMessageElement:"p",errorMessages:{valueMissing:{text:"This field is required",email:"This field is required",tel:"This field is required",checkbox:"Check at least one of the required boxes",radio:"Select one of the required radio options"},patternMismatch:{tel:"Enter a valid phone number",email:"Enter a valid email address",text:"Please match the requested format"}},patterns:{email:"[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",tel:"[\\w\\d\\s\\(\\)\\.+-]+"},fail:function(){},pass:!1};s.prototype={init:function(){this.ph="placeholder"in i.createElement("input"),this.type=e(this.DOMElement).attr("type")||"text",this.DOMElement.validityState=this.DOMElement.validityState||this.defaultValidityState(),this.DOMElement.checkValidity=this.DOMElement.checkValidity||this.getValidityState,this.ph||this.placeHolder()},defaultValidityState:function(){return{valid:!1,stepMismatch:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,tooLong:!1,typeMismatch:!1,valueMissing:!0}},getValidityState:function(){return this.validityState.valid},setValidityState:function(){var e,t=this.DOMElement.getAttribute("pattern")||this.parent.options.patterns[this.type],i=null;return""!==this.DOMElement.value&&("radio"!==this.type&&"checkbox"!==this.type||this.DOMElement.checked)?(this.DOMElement.validityState.valueMissing=!1,e=RegExp(t,""),e.test(this.DOMElement.value)?this.DOMElement.validityState.valid=!0:(this.DOMElement.validityState.valid=!1,this.DOMElement.validityState.patternMismatch=!0,i=this.parent.options.errorMessages.patternMismatch[this.type])):(this.DOMElement.validityState.valid=!1,this.DOMElement.validityState.valueMissing=!0,i=this.parent.options.errorMessages.valueMissing[this.type]),this.DOMElement.validationMessage=i,this},placeHolder:function(){var t=function(t){t.stopPropagation(),e(this).val().removeClass("form-placeholder")},i=function(t){t.stopPropagation(),""===e(this).val()&&(t.stopPropagation(),e(this).val(e(this).attr("placeholder")).addClass("form-placeholder"))};this.DOMElement.getAttribute("placeholder")&&(e(this.DOMElement).on("focus",t).on("blur",i,!1),""===e(this.DOMElement).val()&&e(this.DOMElement).val(e(this.DOMElement).attr("placeholder")).addClass("form-placeholder"))},clearPlaceholder:function(){return e(this.DOMElement).val()===e(this.DOMElement).attr("placeholder")&&e(this.DOMElement).val(""),this},validate:function(){var t=null;return e(this.DOMElement).val(),e(this.DOMElement).attr("pattern")||this.parent.options.patterns[this.type],this.ph||this.clearPlaceholder(),this.parent.HTML5||this.setValidityState(),t=this.DOMElement.checkValidity(),t?(("checkbox"===this.type||"radio"===this.type)&&(this.parent.groups[this.DOMElement.getAttribute("name")]="checked",this.parent.errors[this.DOMElement.getAttribute("name")]&&delete this.parent.errors[this.DOMElement.getAttribute("name")]),!1):this.parent.options.customErrorMessage?"radio"!==this.type&&"checkbox"!==this.type?this.DOMElement.validity.valueMissing&&this.parent.options.errorMessages.valueMissing[this.type]||this.DOMElement.validity.patternMismatch&&this.parent.options.errorMessages.patternMismatch[this.type]:"checked"!==this.parent.groups[this.DOMElement.getAttribute("name")]?(this.parent.groups[this.DOMElement.getAttribute("name")]="not-checked",this.parent.options.errorMessages.valueMissing[this.type]):void 0:this.DOMElement.validationMessage}},r.prototype={HTML5:!1,groups:[],init:function(){var t=this;this.HTML5="noValidate"in i.createElement("form"),(!this.HTML5||this.options.augmentHTML5)&&(e(this.element).find("input, textarea").each(function(){t.elements.push(new s(this,t))}),e(this.element).find("input[type=submit]").on("click",function(e){e.preventDefault(),t.clearErrors().test()}))},writeInline:function(t){var i=this;return e("<"+i.options.errorMessageElement+' role="alert"/>').addClass(i.options.errorMessagesClass).text(t)},clearErrors:function(){var t=this;return e(t.element).find(".form-error-list").length&&e(t.element).find(".form-error-list").remove(),e(t.element).find(".form-error").length&&(e(t.element).find(".form-error").removeClass("form-error"),e(t.element).find(".form-error-message").remove()),e(t.element).find("[aria-labelledBy]")&&e(t.element).find("[aria-labelledBy]").removeAttr("aria-labelledBy"),e(t.element).find("[aria-invalid]")&&e(t.element).find("[aria-invalid]").removeAttr("aria-invalidy"),this},listErrorMessages:function(){var t,i=this,s=e('<dl class="form-error-list"><dt>'+i.options.listTitle+"</dt><dd><ol></ol></dd></dl>");for(t in i.errors)i.errors.hasOwnProperty(t)&&"hasErrors"!==t&&e(s).find("ol").append("<li><a id="+t+"-error"+'" href="#'+i.errors[t].id+'">'+i.errors[t].error+"</a></li>");e(i.element).prepend(s),e("html, body").animate({scrollTop:e(s).offset().top},500),s.focus()},displayInlineErrorMessages:function(){var t=this,s=null,r=null,n=null,l=null,a=null;console.log("To do\n - test displaying of inline errors");for(s in t.errors)t.errors.hasOwnProperty(s)&&"hasErrors"!==s&&(l=t.writeInline(t.errors[s].error),r=null!==i.getElementById(s)?i.getElementById(t.errors[s].id):i.getElementsByName(s)[0],a=t.errors[s].id+"-error",l.setAttribute("id",a),r.setAttribute("aria-labelledBy",a),n=r.parentNode,0===n.getElementsByClassName(t.options.errorMessagesClass).length&&n.insertBefore(l,r.nextSibling));e("html, body").animate({scrollTop:e(this.element).offset().top},50),i.getElementsByClassName(t.options.errorMessagesClass)[0].focus()},addError:function(t,i,s){var r=this,n=t,l=null,a=null,o=null;l=s?e(n).attr("name"):e(n).attr("id"),a=e(n).attr("id"),o=s?n.parentNode:n,e(o).addClass("form-error"),e(n).attr("aria-invalid","true"),r.errors.hasErrors=!0,r.errors[l]={error:i,id:a}},test:function(){var e=null,t=null,i=null,s=this.elements.length,r=this;for(console.log(this),this.errors={},this.groups=[],e=0;s>e;e+=1)t=this.elements[e].DOMElement,"submit"!==t.getAttribute("type")&&null!==t.getAttribute("required")&&"hidden"!==t.getAttribute("type")&&null===t.getAttribute("novalidate")&&(i=this.elements[e].validate(),i&&(r.addError(this.elements[e].DOMElement,i,"checkbox"===this.elements[e].type||"radio"===this.elements[e].type),this.elements[e].ph||this.elements[e].placeHolder()));this.errors.hasErrors&&(r.options.displayMessages&&(r.options.listMessages?r.listErrorMessages():r.displayInlineErrorMessages()),this.options.fail.call())}},e.fn[n]=function(t){return this.each(function(){e.data(this,"plugin_"+n)||e.data(this,"plugin_"+n,new r(this,t))})}})(jQuery,window,document,void 0);
